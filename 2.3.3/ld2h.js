var ld2h=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports=$rdf},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&i(o,r.prototype),o}).apply(null,arguments)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=r(0),a=r(4),u=function(e){return e||window.Headers}(a.Headers);function c(){return o(c.Impl,Array.prototype.slice.call(arguments))}c.Impl=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._graph=r,Array.isArray(t)?this.nodes=t:this.nodes=[t],this.sources=n}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,[{key:"fetch",value:function(){var e=this;if("NamedNode"!==this.termType||this.sources&&this.sources.indexOf(this.value.split("#")[0])>-1)return Promise.resolve(this);var t=this.value.split("#")[0];return c.rdfFetch(t).then(function(e){return e.graph()}).then(function(r){return c(e.node,r,[t])})}},{key:"each",value:function(e){var t=this,r=this.nodes.map(function(r){return e(c([r],t.graph,t.sources))});return Promise.all(r)}},{key:"fetchEach",value:function(e){var t=this,r=this.nodes.map(function(r){return c([r],t.graph,t.sources).fetch().then(e)});return Promise.all(r)}},{key:"split",value:function(){var e=this;return this.nodes.map(function(t){return c([t],e.graph,e.sources)})}},{key:"out",value:function(e){return c(this.graph.each(this.node,e),this.graph,this.sources)}},{key:"in",value:function(e){return c(this.graph.statementsMatching(void 0,e,this.node).map(function(e){return e.subject}),this.graph,this.sources)}},{key:"graph",get:function(){if(!this._graph)throw Error("Operation not possible as no Graph is available, try fetching first");return this._graph}},{key:"node",get:function(){if(1!==this.nodes.length)throw Error("Operation not possible as this GraphNode is underdetermined");return this.nodes[0]}},{key:"termType",get:function(){return this.node.termType}},{key:"value",get:function(){return this.node.value}}]),e}(),c.rdfFetch=function(e,t,r){var n=this;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.headers||(t.headers=new u),t.headers.get("Accept")||t.headers.set("Accept","text/turtle;q=1, application/n-triples;q=.9, application/rdf+xml;q=.8, application/ld+json;q=.7, */*;q=.1"),a(e,t).then(function(t){return t.ok?(t.graph=function(){return new Promise(function(r,n){var o=s.graph(),i=t.headers.get("Content-type").split(";")[0];return t.text().then(function(t){s.parse(t,o,e,i,function(e,t){e?n(e):r(t)})})})},t):t})}(e,t).then(function(o){return o.status<300?o:r&&401===o.status?(console.log("Got 401 response, attempting to login"),r().then(function(){return n.rdfFetch(e,t)})):o})},e.exports=c},function(e,t,r){"use strict";var n=r(0),o=r(3),i=r(1);function s(){}function a(e){for(var t=document.createElement(e.nodeName),r=0;r<e.attributes.length;r++)t.setAttribute(e.attributes[r].name,e.attributes[r].value);t.innerHTML=e.innerHTML,e.parentNode.insertBefore(t,e),e.remove()}function u(e,t){if(e.innerHTML="",!/<script/i.test(t))try{e.innerHTML=t}catch(e){}if(""===e.innerHTML){var r=document.createElement(e.nodeName);if(r.innerHTML=t,r.hasChildNodes()){var n=r.getElementsByTagName("script");if(n.length>0){n=Array.from(n);for(var o=0;o<n.length;o++)a(n[o])}for(;r.firstChild;)console.log(r.firstChild),e.appendChild(r.firstChild)}else console.log("no children")}}function c(e,t){if("HTML"===e.nodeName){var r=document.createElement("html");r.innerHTML=t;var n=r.getElementsByTagName("head")[0].innerHTML,o=r.getElementsByTagName("body")[0].innerHTML;u(e.getElementsByTagName("head")[0],n),u(e.getElementsByTagName("body")[0],o)}else e.innerHTML=t}s.expand=function(){function e(e){var t=document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href}return s.getRenderersGraph().then(function(t){return s.getDataGraph().then(function(r){return function s(){for(var a=new Array,u=document.getElementsByClassName("render"),f=0;f<u.length;f++){var l=u[f];l.classList.remove("render");var h=l.getAttribute("context");if(h&&(h=o.resolveCurie(h)),void 0!==(y=l.getAttribute("resource"))){var p=e(y);c(l,new o(t).render(r,n.sym(p),h)),a.push(s())}else console.warn("Element of class render without resource attribute cannot be rendered.",l)}for(var d=Array.from(document.getElementsByClassName("fetch")),g=function(r){var a=d[r];a.classList.remove("fetch"),console.log(d);var u=a.getAttribute("context");if(u&&(u=o.resolveCurie(u)),null!==(y=a.getAttribute("resource"))&&void 0!==y){var f=e(y),l=a.getAttribute("graph"),h=void 0;h=l?e(l):f.split("#")[0],i.rdfFetch(h).then(function(e){return console.log(e),e.graph().then(function(e){console.log("Got graph of size "+e.length+" from "+h);var r=new o(t).render(e,n.sym(f),u);return c(a,r),s()}).catch(function(e){console.warn("Error rendering "+h+": "+e),e.stack&&console.warn(e.stack)})},function(e){console.warn("Error retrieving "+h+": "+e)})}else console.warn("Element of class fetch without resource attribute cannot be rendered.",a)},v=0;v<d.length;v++){var y;g(v)}return Promise.all(a)}()})})},s.getDataGraph=function(){return new Promise(function(e,t){var r=document.getElementById("data");if(r){var o="SCRIPT"==r.tagName?r.innerHTML:r.outerHTML,i=r.getAttribute("type");i||(i="SCRIPT"==r.tagName?"applictaion/ld+json":"text/html");var s=n.graph();n.parse(o,s,window.location.toString().split("#")[0],i,function(r,n){r?t(r):e(n)})}else e(n.graph())})},s.getRenderersGraph=function(){return new Promise(function(e,t){function r(t,r){var o=n.graph();r||(r="text/turtle"),n.parse(t,o,window.location.toString().split("#")[0],r,function(){return e(o)})}var o=document.getElementById("renderers");if(o){var s=o.getAttribute("src");if(s)console.warn('Using script element with src causes is not recommended, use <link rel="renderers" instead'),fetch(s,{headers:{Accept:"text/turtle"}}).then(function(e){if(e.ok)return e.text();throw new Error(s+" responded with "+e.status)}).then(function(e){r(e)}).catch(function(e){return console.error(e)});else r(o.innerHTML,o.getAttribute("type"))}else{var a=document.querySelectorAll("link[rel='renderers']");if(console.log(a),a.length>0){for(var u=new Array,c=0;c<a.length;c++){var f=a[c].href.split("#")[0];u.push(i.rdfFetch(f).then(function(e){return e.graph()}))}e(Promise.all(u))}else console.warn("No renderers could be found, specify a script element with \n                id renderers or link headers of type renderers")}})},"undefined"!=typeof window&&(window.LD2h=s),e.exports=s},function(e,t,r){"use strict";var n=r(0),o=r(1),i=r(5),s=r(6);new Array;function a(e,t){Array.isArray(e)||(e=[e]),this.tbox=t||e[0],this.rendererGraphs=e.reverse(),this.env={}}!function(){s.rdf2h;var e=i.Context.prototype.lookup;i.Context.prototype.lookup=function(t){if(this.view instanceof a.Renderee){var r=function(e){var t=function(e){var t=[],r=!1,n=!1,o="";function i(){o.length>0&&(t.push(o),o="")}for(var s=0;s<e.length;s++){var a=e[s];n&&("-"!==a&&(i(),r=!0),o+="<",n=!1),"<"!==a?r&&">"==a?(o+=a,i(),r=!1):r||"/"!=a?o+=a:i():n=!0}return i(),t}(e);return function e(t,r){var o=function(e){return"."===e?t:e.endsWith("<-")?t.in(a.resolveCurie(e.substring(0,e.length-2))):e.startsWith("^")?t.in(a.resolveCurie(e.substring(1))):t.out(a.resolveCurie(e))}(r[0]);if(1===r.length){var i=o.nodes;if(0===i.length){if(t.nodes[0].language&&a.resolveCurie(r[0]).equals(n.sym("http://purl.org/dc/terms/language")))return[n.literal(t.nodes[0].language)];if(t.nodes[0].datatype&&a.resolveCurie(r[0]).equals(a.resolveCurie("rdf:type")))return[t.nodes[0].datatype]}return i}return e(o,r.slice(1))}(s,t)},i=this.view.rdf2h,s=this.view.graphNode,u=s.graph,c=this.view.context;if(t.startsWith("@prefix ")){var f=(d=t.split(" "))[1],l=d[2],h=f.substring(0,f.length-1),p=l.substring(1,l.length-1);return a.prefixMap[h]=p,""}if(t.startsWith(":render ")){var d,g,v=(d=t.split(" "))[1];(g=d[2])&&(g=a.resolveCurie(g)),g||(g=c);var y=r(v);return y.length>1&&console.warn("Argument of render evaluates to more than one node!"),y.length>0?i.render(u,y[0],g):""}if(t.startsWith(":continue"))return(g=(d=t.split(" "))[1])&&(g=a.resolveCurie(g)),g||(g=c),s.nodes.length>1&&console.warn(":continue invoked in context with more than one node, this shouldn't be possible!"),i.render(u,s.nodes[0],g);if(t.startsWith("+"))return r(t=t.substring(1)).length>0;var m=r(t);return 1===m.length?new a.Renderee(i,o(m[0],u),c):m.map(function(e){return new a.Renderee(i,o(e,u),c)})}return e.call(this,t)}}(),a.Renderee=function(e,t,r){if(!t.nodes)throw new Error("second argument must be a GraphNode");if(1!==t.nodes.length)throw new Error("Renderee must be a single node");this.rdf2h=e,this.graphNode=t,this.context=r},a.Renderee.prototype.toString=function(){return this.graphNode.value?this.graphNode.value:this.graphNode.toString()},a.prototype.getRenderer=function(e){s.rdf2h;var t=this.tbox;var r=this;var a=function(e){return"Literal"===e.node.termType?[e.node.datatype]:e.out(s.rdf("type")).nodes.sort(function(e,r){return e.equals(r)?0:e.equals(s.rdfs("Resource"))?1:r.equals(s.rdfs("Resource"))?-1:0===t.match(e,s.rdfs("subClassOf"),r).length?0===t.match(r,s.rdfs("subClassOf"),e).length?e.value.localeCompare(r.value):1:-1}).concat([s.rdfs("Resource")])}(e.graphNode),u=function(e,t){var n=r.rendererGraphs;return e.reduce(function(e,r){return e||n.reduce(function(e,n){var i=o(r,n);return e||function(e){return e.find(function(e){return t.equals(e.out(s.rdf2h("context")).node)})}(i.in(s.rdf2h("type")).split())},null)},null)}(a,e.context);if(!u)throw Error("No renderer found with context: <"+e.context.value+"> for any of the types "+a.map(function(e){return"<"+e.value+">"}).join()+". The resource <"+e.graphNode.value+"> could thus not be rendered.");var c=u.out(s.rdf2h("mustache"));if(c.nodes.length>0)return function(e){return function(t){return i.render(e,t)}}(c.value);var f=u.out(s.rdf2h("javaScript"));return function(e){try{var t="",r=new Function("n","context","$rdf","render","print","GraphNode","env",f.value)(e.graphNode,e.context,n,function(t,r){return e.rdf2h.render(t.graph,t.node,r||e.context)},function(e){t+=e},o,e.rdf2h.env);return r?t+r:t}catch(e){e.message=e.message+" in "+f.value;var i=e.stack.split("\n"),s=i.findIndex(function(e){return e.indexOf("RDF2h.render")>0});throw e.stack=i.splice(0,s-1).join("\n"),e}}},a.prototype.render=function(e,t,r){t.termType||(t=n.sym(t)),r||(r=s.rdf2h("Default"));var i=new a.Renderee(this,o(t,e),r);return this.getRenderer(i)(i)},a.prefixMap={},a.prefixMap.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a.prefixMap.rdfs="http://www.w3.org/2000/01/rdf-schema#",a.prefixMap.r2h="http://rdf2h.github.io/2015/rdf2h#",a.prefixMap.schema="http://schema.org/",a.prefixMap.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a.prefixMap.dct="http://purl.org/dc/terms/",a.resolveCurie=function(e){if(e.startsWith("<")&&e.endsWith(">"))return n.sym(e.substring(1,e.length-1));var t=e.split(":"),r=t[0],o=t[1];return a.prefixMap[r]?n.sym(a.prefixMap[r]+o):n.sym(e)},"undefined"!=typeof window&&(window.RDF2h=a),e.exports=a},function(e,t){e.exports=fetch},function(e,t,r){var n,o,i;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(r,s){"object"==typeof t&&t&&"string"!=typeof t.nodeName?s(t):(o=[t],void 0===(i="function"==typeof(n=s)?n.apply(t,o):n)||(e.exports=i))}(0,function(e){var t=Object.prototype.toString,r=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(e){return"function"==typeof e}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function s(e,t){return null!=e&&"object"!=typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var a=RegExp.prototype.test;var u=/\S/;function c(e){return!function(e,t){return a.call(e,t)}(u,e)}var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var l=/\s*/,h=/\s+/,p=/\s*=/,d=/\s*\}/,g=/#|\^|\/|>|\{|&|=|!/;function v(e){this.string=e,this.tail=e,this.pos=0}function y(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function m(){this.cache={}}v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},v.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},y.prototype.push=function(e){return new y(e,this)},y.prototype.lookup=function(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var o,a,u,c=this,f=!1;c;){if(e.indexOf(".")>0)for(o=c.view,a=e.split("."),u=0;null!=o&&u<a.length;)u===a.length-1&&(f=i(o,a[u])||s(o,a[u])),o=o[a[u++]];else o=c.view[e],f=i(c.view,e);if(f){t=o;break}c=c.parent}r[e]=t}return n(t)&&(t=t.call(this.view)),t},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(t,n){var i=this.cache,s=t+":"+(n||e.tags).join(":"),a=i[s];return null==a&&(a=i[s]=function(t,n){if(!t)return[];var i,s,a,u=[],f=[],y=[],m=!1,w=!1;function b(){if(m&&!w)for(;y.length;)delete f[y.pop()];else y=[];m=!1,w=!1}function x(e){if("string"==typeof e&&(e=e.split(h,2)),!r(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(o(e[0])+"\\s*"),s=new RegExp("\\s*"+o(e[1])),a=new RegExp("\\s*"+o("}"+e[1]))}x(n||e.tags);for(var T,k,E,C,M,N,A=new v(t);!A.eos();){if(T=A.pos,E=A.scanUntil(i))for(var R=0,j=E.length;R<j;++R)c(C=E.charAt(R))?y.push(f.length):w=!0,f.push(["text",C,T,T+1]),T+=1,"\n"===C&&b();if(!A.scan(i))break;if(m=!0,k=A.scan(g)||"name",A.scan(l),"="===k?(E=A.scanUntil(p),A.scan(p),A.scanUntil(s)):"{"===k?(E=A.scanUntil(a),A.scan(d),A.scanUntil(s),k="&"):E=A.scanUntil(s),!A.scan(s))throw new Error("Unclosed tag at "+A.pos);if(M=[k,E,T,A.pos],f.push(M),"#"===k||"^"===k)u.push(M);else if("/"===k){if(!(N=u.pop()))throw new Error('Unopened section "'+E+'" at '+T);if(N[1]!==E)throw new Error('Unclosed section "'+N[1]+'" at '+T)}else"name"===k||"{"===k||"&"===k?w=!0:"="===k&&x(E)}if(N=u.pop())throw new Error('Unclosed section "'+N[1]+'" at '+A.pos);return function(e){for(var t,r=[],n=r,o=[],i=0,s=e.length;i<s;++i)switch((t=e[i])[0]){case"#":case"^":n.push(t),o.push(t),n=t[4]=[];break;case"/":o.pop()[5]=t[2],n=o.length>0?o[o.length-1][4]:r;break;default:n.push(t)}return r}(function(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(f))}(t,n)),a},m.prototype.render=function(e,t,r,n){var o=this.parse(e,n),i=t instanceof y?t:new y(t);return this.renderTokens(o,i,r,e,n)},m.prototype.renderTokens=function(e,t,r,n,o){for(var i,s,a,u="",c=0,f=e.length;c<f;++c)a=void 0,"#"===(s=(i=e[c])[0])?a=this.renderSection(i,t,r,n):"^"===s?a=this.renderInverted(i,t,r,n):">"===s?a=this.renderPartial(i,t,r,o):"&"===s?a=this.unescapedValue(i,t):"name"===s?a=this.escapedValue(i,t):"text"===s&&(a=this.rawValue(i)),void 0!==a&&(u+=a);return u},m.prototype.renderSection=function(e,t,o,i){var s=this,a="",u=t.lookup(e[1]);if(u){if(r(u))for(var c=0,f=u.length;c<f;++c)a+=this.renderTokens(e[4],t.push(u[c]),o,i);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)a+=this.renderTokens(e[4],t.push(u),o,i);else if(n(u)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(t.view,i.slice(e[3],e[5]),function(e){return s.render(e,t,o)}))&&(a+=u)}else a+=this.renderTokens(e[4],t,o,i);return a}},m.prototype.renderInverted=function(e,t,n,o){var i=t.lookup(e[1]);if(!i||r(i)&&0===i.length)return this.renderTokens(e[4],t,n,o)},m.prototype.renderPartial=function(e,t,r,o){if(r){var i=n(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i,o),t,r,i):void 0}},m.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},m.prototype.escapedValue=function(t,r){var n=r.lookup(t[1]);if(null!=n)return e.escape(n)},m.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="3.0.1",e.tags=["{{","}}"];var w=new m;return e.clearCache=function(){return w.clearCache()},e.parse=function(e,t){return w.parse(e,t)},e.render=function(e,t,n,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+function(e){return r(e)?"array":typeof e}(e)+'" was given as the first argument for mustache#render(template, view, partials)');return w.render(e,t,n,o)},e.to_html=function(t,r,o,i){var s=e.render(t,r,o);if(!n(i))return s;i(s)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return f[e]})},e.Scanner=v,e.Context=y,e.Writer=m,e})},function(e,t,r){"use strict";var n=r(0);e.exports={schema:function(e){return n.sym("http://schema.org/"+e)},rdf:function(e){return n.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#"+e)},rdfs:function(e){return n.sym("http://www.w3.org/2000/01/rdf-schema#"+e)},foaf:function(e){return n.sym("http://xmlns.com/foaf/0.1/"+e)},rdf2h:function(e){return n.sym("http://rdf2h.github.io/2015/rdf2h#"+e)}}}]);
//# sourceMappingURL=ld2h.js.map