var ld2h=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports=$rdf},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&i(o,r.prototype),o}).apply(null,arguments)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=r(0),u=r(4),a=function(e){return e||window.Headers}(u.Headers);function c(){return o(c.Impl,Array.prototype.slice.call(arguments))}c.Impl=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._graph=r,Array.isArray(t)?this.nodes=t:this.nodes=[t],this.sources=n}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,[{key:"fetch",value:function(){var e=this;if("NamedNode"!==this.termType||this.sources&&this.sources.indexOf(this.value.split("#")[0])>-1)return Promise.resolve(this);var t=this.value.split("#")[0];return c.rdfFetch(t).then(function(e){return e.graph()}).then(function(r){return c(e.node,r,[t])})}},{key:"each",value:function(e){var t=this,r=this.nodes.map(function(r){return e(c([r],t.graph,t.sources))});return Promise.all(r)}},{key:"fetchEach",value:function(e){var t=this,r=this.nodes.map(function(r){return c([r],t.graph,t.sources).fetch().then(e)});return Promise.all(r)}},{key:"split",value:function(){var e=this;return this.nodes.map(function(t){return c([t],e.graph,e.sources)})}},{key:"out",value:function(e){return c(this.graph.each(this.node,e),this.graph,this.sources)}},{key:"in",value:function(e){return c(this.graph.statementsMatching(void 0,e,this.node).map(function(e){return e.subject}),this.graph,this.sources)}},{key:"graph",get:function(){if(!this._graph)throw Error("Operation not possible as no Graph is available, try fetching first");return this._graph}},{key:"node",get:function(){if(1!==this.nodes.length)throw Error("Operation not possible as this GraphNode is underdetermined");return this.nodes[0]}},{key:"termType",get:function(){return this.node.termType}},{key:"value",get:function(){return this.node.value}}]),e}(),c.rdfFetch=function(e,t,r){var n=this;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.headers||(t.headers=new a),t.headers.get("Accept")||t.headers.set("Accept","text/turtle;q=1, application/n-triples;q=.9, application/rdf+xml;q=.8, application/ld+json;q=.7, */*;q=.1"),u(e,t).then(function(t){return t.ok?(t.graph=function(){return new Promise(function(r,n){var o=s.graph(),i=t.headers.get("Content-type").split(";")[0];return t.text().then(function(t){s.parse(t,o,e,i,function(e,t){e?n(e):r(t)})})})},t):t})}(e,t).then(function(o){return o.status<300?o:r&&401===o.status?(console.log("Got 401 response, attempting to login"),r().then(function(){return n.rdfFetch(e,t)})):o})},e.exports=c},function(e,t,r){"use strict";var n=r(0),o=r(3),i=r(1);function s(){}function u(e,t){if("HTML"===e.nodeName){var r=document.createElement("html");r.innerHTML=t;var n=r.getElementsByTagName("head")[0].innerHTML,o=r.getElementsByTagName("body")[0].innerHTML;e.getElementsByTagName("head")[0].innerHTML=n,e.getElementsByTagName("body")[0].innerHTML=o}else e.innerHTML=t}s.expand=function(){function e(e){var t=document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href}return s.getRenderersGraph().then(function(t){return s.getDataGraph().then(function(r){return function s(){for(var a=new Array,c=document.getElementsByClassName("render"),f=0;f<c.length;f++){var h=c[f];if(h.classList.remove("render"),(g=h.getAttribute("context"))&&(g=o.resolveCurie(g)),void 0!==(v=h.getAttribute("resource"))){var l=e(v);u(h,new o(t).render(r,n.sym(l),g)),a.push(s())}else console.warn("Element of class render without resource attribute cannot be rendered.",h)}var p=document.getElementsByClassName("fetch"),d=function(){var r=p[f];r.classList.remove("fetch"),(g=r.getAttribute("context"))&&(g=o.resolveCurie(g)),null!==(v=r.getAttribute("resource"))&&void 0!==v?(l=e(v),y=r.getAttribute("graph"),m=y?e(y):l.split("#")[0],i.rdfFetch(m).catch(function(e){console.warn("Error retrieving "+m+": "+e)}).then(function(e){return e.graph().then(function(e){console.log("Got graph of size "+e.length+" from "+m);var i=new o(t).render(e,n.sym(l),g);return u(r,i),s()})}).catch(function(e){console.warn("Error rendering "+m+": "+e),e.stack&&console.warn(e.stack)})):console.warn("Element of class fetch without resource attribute cannot be rendered.",r)};for(f=0;f<p.length;f++){var g,v,y,m;d()}return Promise.all(a)}()})})},s.getDataGraph=function(){return new Promise(function(e,t){var r=document.getElementById("data");if(r){var o="SCRIPT"==r.tagName?r.innerHTML:r.outerHTML,i=r.getAttribute("type");i||(i="SCRIPT"==r.tagName?"applictaion/ld+json":"text/html");var s=n.graph();n.parse(o,s,window.location.toString().split("#")[0],i,function(r,n){r?t(r):e(n)})}else e(n.graph())})},s.getRenderersGraph=function(){return new Promise(function(e,t){function r(t,r){var o=n.graph();r||(r="text/turtle"),n.parse(t,o,window.location.toString().split("#")[0],r,function(){return e(o)})}var o=document.getElementById("renderers");if(o){var s=o.getAttribute("src");if(s)console.warn('Using script element with src causes is not recommended, use <link rel="renderers" instead'),fetch(s,{headers:{Accept:"text/turtle"}}).then(function(e){if(e.ok)return e.text();throw new Error(s+" responded with "+e.status)}).then(function(e){r(e)}).catch(function(e){return console.error(e)});else r(o.innerHTML,o.getAttribute("type"))}else{var u=document.querySelectorAll("link[rel='renderers']");if(console.log(u),u.length>0){for(var a=new Array,c=0;c<u.length;c++){var f=u[c].href.split("#")[0];a.push(i.rdfFetch(f).then(function(e){return e.graph()}))}e(Promise.all(a))}else console.warn("No renderers could be found, specify a script element with \n                id renderers or link headers of type renderers")}})},"undefined"!=typeof window&&(window.LD2h=s),e.exports=s},function(e,t,r){"use strict";var n=r(0),o=r(1),i=r(5),s=r(6);new Array;function u(e,t){Array.isArray(e)||(e=[e]),this.tbox=t||e[0],this.rendererGraphs=e.reverse(),this.env={}}!function(){s.rdf2h;var e=i.Context.prototype.lookup;i.Context.prototype.lookup=function(t){if(this.view instanceof u.Renderee){var r=function(e){var t=function(e){var t=[],r=!1,n=!1,o="";function i(){o.length>0&&(t.push(o),o="")}for(var s=0;s<e.length;s++){var u=e[s];n&&("-"!==u&&(i(),r=!0),o+="<",n=!1),"<"!==u?r&&">"==u?(o+=u,i(),r=!1):r||"/"!=u?o+=u:i():n=!0}return i(),t}(e);return function e(t,r){var o=function(e){return"."===e?t:e.endsWith("<-")?t.in(u.resolveCurie(e.substring(0,e.length-2))):e.startsWith("^")?t.in(u.resolveCurie(e.substring(1))):t.out(u.resolveCurie(e))}(r[0]);if(1===r.length){var i=o.nodes;if(0===i.length){if(t.nodes[0].language&&u.resolveCurie(r[0]).equals(n.sym("http://purl.org/dc/terms/language")))return[n.literal(t.nodes[0].language)];if(t.nodes[0].datatype&&u.resolveCurie(r[0]).equals(u.resolveCurie("rdf:type")))return[t.nodes[0].datatype]}return i}return e(o,r.slice(1))}(s,t)},i=this.view.rdf2h,s=this.view.graphNode,a=s.graph,c=this.view.context;if(t.startsWith("@prefix ")){var f=(d=t.split(" "))[1],h=d[2],l=f.substring(0,f.length-1),p=h.substring(1,h.length-1);return u.prefixMap[l]=p,""}if(t.startsWith(":render ")){var d,g,v=(d=t.split(" "))[1];(g=d[2])&&(g=u.resolveCurie(g)),g||(g=c);var y=r(v);return y.length>1&&console.warn("Argument of render evaluates to more than one node!"),y.length>0?i.render(a,y[0],g):""}if(t.startsWith(":continue"))return(g=(d=t.split(" "))[1])&&(g=u.resolveCurie(g)),g||(g=c),s.nodes.length>1&&console.warn(":continue invoked in context with more than one node, this shouldn't be possible!"),i.render(a,s.nodes[0],g);if(t.startsWith("+"))return r(t=t.substring(1)).length>0;var m=r(t);return 1===m.length?new u.Renderee(i,o(m[0],a),c):m.map(function(e){return new u.Renderee(i,o(e,a),c)})}return e.call(this,t)}}(),u.Renderee=function(e,t,r){if(!t.nodes)throw new Error("second argument must be a GraphNode");if(1!==t.nodes.length)throw new Error("Renderee must be a single node");this.rdf2h=e,this.graphNode=t,this.context=r},u.Renderee.prototype.toString=function(){return this.graphNode.value?this.graphNode.value:this.graphNode.toString()},u.prototype.getRenderer=function(e){s.rdf2h;var t=this.tbox;var r=this;var u=function(e){return"Literal"===e.node.termType?[e.node.datatype]:e.out(s.rdf("type")).nodes.sort(function(e,r){return e.equals(r)?0:e.equals(s.rdfs("Resource"))?1:r.equals(s.rdfs("Resource"))?-1:0===t.match(e,s.rdfs("subClassOf"),r).length?0===t.match(r,s.rdfs("subClassOf"),e).length?e.value.localeCompare(r.value):1:-1}).concat([s.rdfs("Resource")])}(e.graphNode),a=function(e,t){var n=r.rendererGraphs;return e.reduce(function(e,r){return e||n.reduce(function(e,n){var i=o(r,n);return e||function(e){return e.find(function(e){return t.equals(e.out(s.rdf2h("context")).node)})}(i.in(s.rdf2h("type")).split())},null)},null)}(u,e.context);if(!a)throw Error("No renderer found with context: <"+e.context.value+"> for any of the types "+u.map(function(e){return"<"+e.value+">"}).join()+". The resource <"+e.graphNode.value+"> could thus not be rendered.");var c=a.out(s.rdf2h("mustache"));if(c.nodes.length>0)return function(e){return function(t){return i.render(e,t)}}(c.value);var f=a.out(s.rdf2h("javaScript"));return function(e){try{var t="",r=new Function("n","context","$rdf","render","print","GraphNode","env",f.value)(e.graphNode,e.context,n,function(t,r){return e.rdf2h.render(t.graph,t.node,r||e.context)},function(e){t+=e},o,e.rdf2h.env);return r?t+r:t}catch(e){e.message=e.message+" in "+f.value;var i=e.stack.split("\n"),s=i.findIndex(function(e){return e.indexOf("RDF2h.render")>0});throw e.stack=i.splice(0,s-1).join("\n"),e}}},u.prototype.render=function(e,t,r){t.termType||(t=n.sym(t)),r||(r=s.rdf2h("Default"));var i=new u.Renderee(this,o(t,e),r);return this.getRenderer(i)(i)},u.prefixMap={},u.prefixMap.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u.prefixMap.rdfs="http://www.w3.org/2000/01/rdf-schema#",u.prefixMap.r2h="http://rdf2h.github.io/2015/rdf2h#",u.prefixMap.schema="http://schema.org/",u.prefixMap.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u.prefixMap.dct="http://purl.org/dc/terms/",u.resolveCurie=function(e){if(e.startsWith("<")&&e.endsWith(">"))return n.sym(e.substring(1,e.length-1));var t=e.split(":"),r=t[0],o=t[1];return u.prefixMap[r]?n.sym(u.prefixMap[r]+o):n.sym(e)},"undefined"!=typeof window&&(window.RDF2h=u),e.exports=u},function(e,t){e.exports=fetch},function(e,t,r){var n,o,i;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(r,s){"object"==typeof t&&t&&"string"!=typeof t.nodeName?s(t):(o=[t],void 0===(i="function"==typeof(n=s)?n.apply(t,o):n)||(e.exports=i))}(0,function(e){var t=Object.prototype.toString,r=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(e){return"function"==typeof e}function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function s(e,t){return null!=e&&"object"!=typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var u=RegExp.prototype.test;var a=/\S/;function c(e){return!function(e,t){return u.call(e,t)}(a,e)}var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var h=/\s*/,l=/\s+/,p=/\s*=/,d=/\s*\}/,g=/#|\^|\/|>|\{|&|=|!/;function v(e){this.string=e,this.tail=e,this.pos=0}function y(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function m(){this.cache={}}v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},v.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},y.prototype.push=function(e){return new y(e,this)},y.prototype.lookup=function(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var o,u,a,c=this,f=!1;c;){if(e.indexOf(".")>0)for(o=c.view,u=e.split("."),a=0;null!=o&&a<u.length;)a===u.length-1&&(f=i(o,u[a])||s(o,u[a])),o=o[u[a++]];else o=c.view[e],f=i(c.view,e);if(f){t=o;break}c=c.parent}r[e]=t}return n(t)&&(t=t.call(this.view)),t},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(t,n){var i=this.cache,s=t+":"+(n||e.tags).join(":"),u=i[s];return null==u&&(u=i[s]=function(t,n){if(!t)return[];var i,s,u,a=[],f=[],y=[],m=!1,w=!1;function b(){if(m&&!w)for(;y.length;)delete f[y.pop()];else y=[];m=!1,w=!1}function x(e){if("string"==typeof e&&(e=e.split(l,2)),!r(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(o(e[0])+"\\s*"),s=new RegExp("\\s*"+o(e[1])),u=new RegExp("\\s*"+o("}"+e[1]))}x(n||e.tags);for(var k,T,E,C,M,R,A=new v(t);!A.eos();){if(k=A.pos,E=A.scanUntil(i))for(var N=0,j=E.length;N<j;++N)c(C=E.charAt(N))?y.push(f.length):w=!0,f.push(["text",C,k,k+1]),k+=1,"\n"===C&&b();if(!A.scan(i))break;if(m=!0,T=A.scan(g)||"name",A.scan(h),"="===T?(E=A.scanUntil(p),A.scan(p),A.scanUntil(s)):"{"===T?(E=A.scanUntil(u),A.scan(d),A.scanUntil(s),T="&"):E=A.scanUntil(s),!A.scan(s))throw new Error("Unclosed tag at "+A.pos);if(M=[T,E,k,A.pos],f.push(M),"#"===T||"^"===T)a.push(M);else if("/"===T){if(!(R=a.pop()))throw new Error('Unopened section "'+E+'" at '+k);if(R[1]!==E)throw new Error('Unclosed section "'+R[1]+'" at '+k)}else"name"===T||"{"===T||"&"===T?w=!0:"="===T&&x(E)}if(R=a.pop())throw new Error('Unclosed section "'+R[1]+'" at '+A.pos);return function(e){for(var t,r=[],n=r,o=[],i=0,s=e.length;i<s;++i)switch((t=e[i])[0]){case"#":case"^":n.push(t),o.push(t),n=t[4]=[];break;case"/":o.pop()[5]=t[2],n=o.length>0?o[o.length-1][4]:r;break;default:n.push(t)}return r}(function(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(f))}(t,n)),u},m.prototype.render=function(e,t,r,n){var o=this.parse(e,n),i=t instanceof y?t:new y(t);return this.renderTokens(o,i,r,e,n)},m.prototype.renderTokens=function(e,t,r,n,o){for(var i,s,u,a="",c=0,f=e.length;c<f;++c)u=void 0,"#"===(s=(i=e[c])[0])?u=this.renderSection(i,t,r,n):"^"===s?u=this.renderInverted(i,t,r,n):">"===s?u=this.renderPartial(i,t,r,o):"&"===s?u=this.unescapedValue(i,t):"name"===s?u=this.escapedValue(i,t):"text"===s&&(u=this.rawValue(i)),void 0!==u&&(a+=u);return a},m.prototype.renderSection=function(e,t,o,i){var s=this,u="",a=t.lookup(e[1]);if(a){if(r(a))for(var c=0,f=a.length;c<f;++c)u+=this.renderTokens(e[4],t.push(a[c]),o,i);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)u+=this.renderTokens(e[4],t.push(a),o,i);else if(n(a)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(t.view,i.slice(e[3],e[5]),function(e){return s.render(e,t,o)}))&&(u+=a)}else u+=this.renderTokens(e[4],t,o,i);return u}},m.prototype.renderInverted=function(e,t,n,o){var i=t.lookup(e[1]);if(!i||r(i)&&0===i.length)return this.renderTokens(e[4],t,n,o)},m.prototype.renderPartial=function(e,t,r,o){if(r){var i=n(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i,o),t,r,i):void 0}},m.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},m.prototype.escapedValue=function(t,r){var n=r.lookup(t[1]);if(null!=n)return e.escape(n)},m.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="3.0.1",e.tags=["{{","}}"];var w=new m;return e.clearCache=function(){return w.clearCache()},e.parse=function(e,t){return w.parse(e,t)},e.render=function(e,t,n,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+function(e){return r(e)?"array":typeof e}(e)+'" was given as the first argument for mustache#render(template, view, partials)');return w.render(e,t,n,o)},e.to_html=function(t,r,o,i){var s=e.render(t,r,o);if(!n(i))return s;i(s)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return f[e]})},e.Scanner=v,e.Context=y,e.Writer=m,e})},function(e,t,r){"use strict";var n=r(0);e.exports={schema:function(e){return n.sym("http://schema.org/"+e)},rdf:function(e){return n.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#"+e)},rdfs:function(e){return n.sym("http://www.w3.org/2000/01/rdf-schema#"+e)},foaf:function(e){return n.sym("http://xmlns.com/foaf/0.1/"+e)},rdf2h:function(e){return n.sym("http://rdf2h.github.io/2015/rdf2h#"+e)}}}]);
//# sourceMappingURL=ld2h.js.map